---
title: "040 - Get More Moneyï¼ˆâ˜…7ï¼‰"
---

[040 \- Get More Moneyï¼ˆâ˜…7ï¼‰](https://atcoder.jp/contests/typical90/tasks/typical90_an)


# ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

## ç‡ƒã‚„ã™åŸ‹ã‚ã‚‹å•é¡Œ

ç§ã¯ã€Œç‡ƒã‚„ã™åŸ‹ã‚ã‚‹å•é¡Œã€ã‚’çŸ¥ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚å…¥åŠ›ä¾‹ 1 ã‚ˆã‚Šã‚‚ç°¡å˜ãªä¾‹ã‚’ç©ã¿é‡ã­ã¦ã€ã‚°ãƒ©ãƒ•ã§è§£ãã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã‚ˆã‚Šè©³ã—ãçŸ¥ã‚ŠãŸã„æ–¹ã¯ã€ä¸‹è¨˜è¨˜äº‹ã® 040 è§£èª¬ã‚’ã©ã†ãã€‚

* [ç‡ƒã‚„ã™åŸ‹ã‚ã‚‹å•é¡Œã¨Project Selection Problemã®æ•´ç† \#Java \- Qiita](https://qiita.com/tanaka-a/items/fb8d84c44190c7098047)

### 1. å®¶ãŒ1ä»¶ã®å ´åˆ

* ãã‚Œãã‚Œã®å®¶ã‚’è¨ªã‚Œã‚‹å ´åˆã¯ 5å††æ¶ˆè²»ã™ã‚‹
* ğŸ 1 ã‚’è¨ªã‚Œã‚‹ã¨ 8å††å¾—ã‚‰ã‚Œã‚‹

ã“ã®ã¨ãã«ã€æœ€å¤§ã§ä½•å††å¾—ã‚’ã™ã‚‹ã‹ã‚’è€ƒãˆã¾ã™ã€‚

ã‚‚ã¡ã‚ã‚“ã€ã€ŒğŸ 1 ã‚’è¨ªã‚Œã‚‹: +3å††ã€ã€Œè¨ªã‚Œãªã„: Â±0å††ã€ ã§ã™ã€‚3å††å¾—ã‚’ã—ã¾ã™ã€‚

ã“ã‚Œã‚’ã‚°ãƒ©ãƒ•ã§è€ƒãˆã¾ã™ã€‚

ã€Œ5å††æ¶ˆè²»ã™ã‚‹ã€ã€Œ8å††å¾—ã‚‰ã‚Œã‚‹ã€ã¨ã„ã†ã‚ˆã†ã«ç¬¦å·ãŒå¤‰ã‚ã‚‹ã¨æ‰±ã„ã«ãã„ã§ã™ã®ã§ã€æœ€åˆã‹ã‚‰ ğŸ 1 ã«ã‚ã‚‹ 8å††ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

ãã—ã¦ã€ğŸ 1 ã‚’è¨ªã‚Œã‚‹ãªã‚‰5å††æ‰•ã†ã€è¨ªã‚Œãªã„ãªã‚‰ 8å††æ‰•ã†ã¨è€ƒãˆã¾ã™ã€‚ã©ã¡ã‚‰ã‹ã‚’é¸ã³ã¾ã™ã€‚ä¸¡æ–¹æ‰•ã†ã€ã©ã¡ã‚‰ã‚‚æ‰•ã‚ãªã„ã€ã¨ã„ã†é¸æŠè‚¢ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

```mermaid
graph LR;
S((S))
1((ğŸ 1))
T((T))
S -- "8å††" --- 1
1 -- "5å††" --- T
```

5å††ã‚’é¸ã¶æ–¹ãŒã€æ”¯æ‰•ã„ãŒå°‘ãªãæ¸ˆã¿ã¾ã™ã€‚ç‰‡æ–¹ã®é¸æŠè‚¢ã‚’é¸ã¶ã“ã¨ã‚’ã€ã‚°ãƒ©ãƒ•ã‚’ã‚«ãƒƒãƒˆã™ã‚‹ã“ã¨ã§è¡¨ç¾ã—ã¾ã™ã€‚

```mermaid
graph LR;
S((S))
1((ğŸ 1))
T((T))
S -- "8å††" --- 1
1 -. "âŒ5å††" .- T
```

ã“ã®ã‚°ãƒ©ãƒ•ã¯ã€5å††ã‚’æ”¯æ‰•ã„ ğŸ 1 ã‚’è¨ªã‚Œã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

ã‚°ãƒ©ãƒ•ã®æµé‡ã‚’è€ƒãˆã‚‹ã¨ãã«ã¯æœ‰å‘ã‚°ãƒ©ãƒ•ã®æ–¹ãŒæ‰±ã„ã‚„ã™ã„ã§ã™ã€‚æ¬¡ã®ã‚ˆã†ã«æãã¨ã€æœ€å°ã‚«ãƒƒãƒˆã®ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚

```mermaid
graph LR;
S((S))
1((ğŸ 1))
T((T))
S -- "8å††" --> 1
1 -. "âŒ5å††" .-> T
```

æœ€å¤§æµã¨è¦‹ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ä¸¡æ–¹ã®é¸æŠè‚¢ã‚’é€šã‚‹ã‚°ãƒ©ãƒ•ãŒã€æœ€å¤§5å††åˆ†ã‚’æµã›ã¾ã™ã€‚

```mermaid
graph LR;
S((S))
1((ğŸ 1))
T((T))
S -- "5/8" --> 1
1 -- "5/5" --> T
```

### 2. å®¶ãŒ2ä»¶, éµãŒãªã„å ´åˆ

* ãã‚Œãã‚Œã®å®¶ã‚’è¨ªã‚Œã‚‹å ´åˆã¯ 5å††æ¶ˆè²»ã™ã‚‹
* ğŸ 1 ã‚’è¨ªã‚Œã‚‹ã¨ 4å††å¾—ã‚‰ã‚Œã‚‹
* ğŸ 2 ã‚’è¨ªã‚Œã‚‹ã¨ 8å††å¾—ã‚‰ã‚Œã‚‹

ã“ã®ã¨ãã«ã€æœ€å¤§ã§ä½•å††å¾—ã‚’ã™ã‚‹ã‹ã‚’è€ƒãˆã¾ã™ã€‚

```mermaid
graph LR;
S((S))
1((ğŸ 1))
2((ğŸ 2))
T((T))
S -- "4å††" --> 1
1 -- "5å††" --> T
S -- "8å††" --> 2
2 -- "5å††" --> T
```

å…ˆã»ã©åŒæ§˜ã«ã€ç¬¦å·ãŒå¤‰ã‚ã‚‹ã¨æ‰±ã„ã«ãã„ã§ã™ã®ã§ã€æœ€åˆã‹ã‚‰ ğŸ 1 ã«ã‚ã‚‹ 4å††ã¨ã€ğŸ 2 ã«ã‚ã‚‹ 8å††ã€è¨ˆ 12 å††ã¨ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚ã“ã“ã‹ã‚‰ã®è¿½åŠ æ”¯æ‰•ã„ã‚’å°‘ãªãã™ã‚‹å•é¡Œã¨è€ƒãˆã¾ã™ã€‚

ğŸ 1 ã¯ 4å††æ”¯æ‰•ã„ã¨ 5å††æ”¯æ‰•ã„ã®ã©ã¡ã‚‰ã‹ã‚’é¸æŠã—ã¾ã™ã€‚4å††ã®æ–¹ãŒå°‘ãªã„ã§ã™ã€‚ğŸ 1 ã®ä¸­ã«å…¥ã£ã¦ã„ã‚‹ 4å††ã‚’è«¦ã‚ã‚‹ã¨ã„ã†ã“ã¨ã¯ã€ğŸ 1 ã«è¨ªã‚Œãªã„ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚

ğŸ 2 ã¯å…ˆã»ã©ã¨åŒã˜ã§ã™ã€‚

```mermaid
graph LR;
S((S))
1((ğŸ 1))
2((ğŸ 2))
T((T))
S -. "âŒ4å††" .-> 1
1 -- "5å††" --> T
S -- "8å††" --> 2
2 -. "âŒ5å††" .-> T
```

ã‚°ãƒ©ãƒ•ã®ã‚«ãƒƒãƒˆã¯ã€ã€Œå®¶ã‚’è¨ªã‚Œã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã€ã€Œè¨ªã‚Œãªã„ã‚°ãƒ«ãƒ¼ãƒ—ã€ã® 2ã¤ã«åˆ†ã‘ã‚‹ã“ã¨ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚è¨ªã‚Œã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã¯å§‹ç‚¹ S ã‹ã‚‰åˆ°é”å¯èƒ½ã€è¨ªã‚Œãªã„ã‚°ãƒ«ãƒ¼ãƒ—ã¯åˆ°é”ä¸å¯èƒ½ã§ã™ã€‚

```mermaid
graph LR;
subgraph è¨ªã‚Œã‚‹
S((S))
2((ğŸ 2))
end
subgraph è¨ªã‚Œãªã„
1((ğŸ 1))
T((T))
end
S -. "âŒ4å††" ..-> 1
1 -- "5å††" --> T
S -- "8å††" --> 2
2 -. "âŒ5å††" .-> T
```

ç­”ãˆã¯ (4 + 8) - (5 + 4) = 3å††ã§ã™ã€‚

### 3. å®¶ãŒ2ä»¶, éµãŒ1æœ¬ã‚ã‚‹å ´åˆ

* ãã‚Œãã‚Œã®å®¶ã‚’è¨ªã‚Œã‚‹å ´åˆã¯ 5å††æ¶ˆè²»ã™ã‚‹
* ğŸ 1 ã‚’è¨ªã‚Œã‚‹ã¨ 4å††å¾—ã‚‰ã‚Œã‚‹
* ğŸ 2 ã‚’è¨ªã‚Œã‚‹ã¨ 8å††å¾—ã‚‰ã‚Œã‚‹
* ğŸ 1 ã®ä¸­ã«ã€ğŸ 2 ã«å…¥ã‚‹ãŸã‚ã«å¿…è¦ãªéµ ğŸ”‘ ãŒã‚ã‚‹ (New!)

ã“ã®ã¨ãã«ã€æœ€å¤§ã§ä½•å††å¾—ã‚’ã™ã‚‹ã‹ã‚’è€ƒãˆã¾ã™ã€‚

ã€ŒğŸ 1 ã®ä¸­ã«ã€ğŸ 2 ã«å…¥ã‚‹ãŸã‚ã«å¿…è¦ãªéµ ğŸ”‘ ãŒã‚ã‚‹ã€ã‚’è¨€ã„æ›ãˆã‚‹ã¨ã€ã€ŒğŸ 2 ã‚’è¨ªã‚Œã‚‹å ´åˆã¯ ğŸ 1 ã‚‚è¨ªã‚Œã¦ã„ã‚‹ã€ã¨ãªã‚Šã¾ã™ã€‚

ã“ã®æ¡ä»¶ã‚’ã€ŒğŸ 2 ã‚’è¨ªã‚Œã€ã‹ã¤ ğŸ 1 ã‚’è¨ªã‚Œãªã„ãŸã‚ã«ã¯ã€âˆ å††è¿½åŠ æ”¯æ‰•ã„ã‚’ã™ã‚‹ã€ã¨ã„ã†å½¢ã§æãã¾ã™ã€‚ã‚°ãƒ©ãƒ•ã«çµŒè·¯ã‚’ä¸€æœ¬è¿½åŠ ã—ã¾ã™ã€‚

```mermaid
graph LR;
S((S))
1((ğŸ 1))
2((ğŸ 2))
T((T))
S -- "4å††" --> 1
1 -- "5å††" --> T
S -- "8å††" --> 2
2 -- "5å††" --> T
2 -- "âˆå††" --> 1
```

âˆå††ã®çµŒè·¯ãŒå¢—ãˆãŸã“ã¨ã§ã€éµãŒãªã„å ´åˆã®ã‚«ãƒƒãƒˆã§ã¯ã‚°ãƒ«ãƒ¼ãƒ—åˆ†ã‘ã§ããªããªã‚Šã¾ã—ãŸã€‚

```mermaid
graph LR;
subgraph è¨ªã‚Œã‚‹?
S((S))
2((ğŸ 2))
end
subgraph è¨ªã‚Œãªã„?
1((ğŸ 1))
T((T))
end
S -. "âŒ4å††" ..-> 1
1 -- "5å††" --> T
S -- "8å††" --> 2
2 -. "âŒ5å††" .-> T
2 -- "âˆå††" --> 1
```

æ­£ã—ã„æœ€å°ã‚«ãƒƒãƒˆã¯ã“ã¡ã‚‰ã§ã™:

```mermaid
graph LR;
subgraph è¨ªã‚Œã‚‹
S((S))
1((ğŸ 1))
2((ğŸ 2))
end
subgraph è¨ªã‚Œãªã„
T((T))
end
S -. "4å††" ..-> 1
1 -- "âŒ5å††" --> T
S -- "8å††" --> 2
2 -. "âŒ5å††" .-> T
2 -- "âˆå††" --> 1
```

ç­”ãˆã¯ (8 + 4) - (5 + 5) = 2å††ã§ã™ã€‚

### 4. å®¶ãŒ5ä»¶, éµãŒ3æœ¬ã‚ã‚‹å ´åˆ

å…¬å¼å•é¡Œã®å…¥åŠ›ä¾‹1 ã¨åŒã˜ã§ã™ã€‚

* ãã‚Œãã‚Œã®å®¶ã‚’è¨ªã‚Œã‚‹å ´åˆã¯ 5å††æ¶ˆè²»ã™ã‚‹
* ğŸ 1 ã‚’è¨ªã‚Œã‚‹ã¨ 5å††å¾—ã‚‰ã‚Œã‚‹
* ğŸ 2 ã‚’è¨ªã‚Œã‚‹ã¨ 2å††å¾—ã‚‰ã‚Œã‚‹
* ğŸ 3 ã‚’è¨ªã‚Œã‚‹ã¨ 10å††å¾—ã‚‰ã‚Œã‚‹
* ğŸ 4 ã‚’è¨ªã‚Œã‚‹ã¨ 3å††å¾—ã‚‰ã‚Œã‚‹
* ğŸ 5 ã‚’è¨ªã‚Œã‚‹ã¨ 6å††å¾—ã‚‰ã‚Œã‚‹
* ğŸ 1 ã®ä¸­ã«ã€ğŸ 3 ã«å…¥ã‚‹ãŸã‚ã«å¿…è¦ãªéµ ğŸ”‘ ãŒã‚ã‚‹
* ğŸ 2 ã®ä¸­ã«ã€ğŸ 3 ã«å…¥ã‚‹ãŸã‚ã«å¿…è¦ãªéµ ğŸ”‘ ãŒã‚ã‚‹
* ğŸ 4 ã®ä¸­ã«ã€ğŸ 5 ã«å…¥ã‚‹ãŸã‚ã«å¿…è¦ãªéµ ğŸ”‘ ãŒã‚ã‚‹

åŒã˜ã‚ˆã†ã«ã€ã€ŒğŸ 3 ã‚’è¨ªã‚Œã‚‹å ´åˆã¯ ğŸ 1, ğŸ 2 ä¸¡æ–¹ã¨ã‚‚è¨ªã‚Œã¦ã„ã‚‹ã€ã€ŒğŸ 5 ã‚’è¨ªã‚Œã‚‹å ´åˆã¯ ğŸ 4 ã‚‚è¨ªã‚Œã¦ã„ã‚‹ã€ã¨ã„ã†æµè·¯ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```mermaid
graph LR;
S((S))
1((ğŸ 1))
2((ğŸ 2))
3((ğŸ 3))
4((ğŸ 4))
5((ğŸ 5))
T((T))
S -- "5å††" --> 1
S -- "2å††" --> 2
S -- "10å††" --> 3
S -- "3å††" --> 4
S -- "6å††" --> 5

1 -- "5å††" --> T
2 -- "5å††" --> T
3 -- "5å††" --> T
4 -- "5å††" --> T
5 -- "5å††" --> T

3 -- "âˆå††" --> 1
3 -- "âˆå††" --> 2
5 -- "âˆå††" --> 4
```


```mermaid
graph LR;
subgraph è¨ªã‚Œã‚‹
S((S))
1((ğŸ 1))
2((ğŸ 2))
3((ğŸ 3))
end
subgraph è¨ªã‚Œãªã„
4((ğŸ 4))
5((ğŸ 5))
T((T))
end

S -- "5å††" --> 1
S -- "2å††" --> 2
S -- "10å††" --> 3
S -. "âŒ3å††" ...-> 4
S -. "âŒ6å††" ...-> 5

1 -. "âŒ5å††" ...-> T
2 -. "âŒ5å††" ...-> T
3 -. "âŒ5å††" ...-> T
4 -- "5å††" --> T
5 -- "5å††" --> T

3 -- "âˆå††" --> 1
3 -- "âˆå††" --> 2
5 -- "âˆå††" --> 4
```

æœ€å°ã‚«ãƒƒãƒˆã‚’è§£ãã€å°ã•ãªæ•°å­—ã®å®¶ã‹ã‚‰é †ã«è¨ªã‚Œã‚‹ã“ã¨ã§è§£ã‘ã¾ã™ã€‚

æ­£è§£ã¯ (5 + 2 + 10 + 3 + 6) - (5 + 5 + 5 + 3 + 6) = 2å†† ã§ã™ã€‚


## æœ€å°ã‚«ãƒƒãƒˆ, æœ€å¤§æµ (MfGraph)

[MfGraph in ac\_library::maxflow \- Rust](https://docs.rs/ac-library-rs/0.1.1/ac_library/maxflow/struct.MfGraph.html)

ac_library ã® `MfGraph` ã‚’ãã®ã¾ã¾ä½¿ãˆã¾ã™ã€‚

```rust
let mut graph = MfGraph::<usize>::new(n + 2);
let s = n;
let t = n + 1;

for (i, c) in m.iter().enumerate() {
    for &c in c {
        graph.add_edge(c, i, usize::MAX); // éµãŒã‹ã‹ã£ã¦ã„ã‚‹ c ã«ã¯å…ˆã«å…¥ã‚Œãªã„
    }
}
for (i, &a) in a.iter().enumerate() {
    graph.add_edge(s, i, a); // å®¶ã«å…¥ã‚‰ãªã„ã¨ãã« a å††å¾—ã‚‰ã‚Œãªããªã‚‹
    graph.add_edge(i, t, w); // å®¶ã«å…¥ã‚‹ã¨ãã« w å††æ¶ˆè²»ã™ã‚‹
}
let flow = graph.flow(s, t);
let result = a.iter().sum::<usize>() - flow;
println!("{result}");
```

é ‚ç‚¹ã®ç•ªå·ã¯ã€æ¬¡ã®ã‚ˆã†ã« 0é–‹å§‹ã«ã—ã¾ã—ãŸã€‚å§‹çµ‚ç‚¹ã«ã‚‚å‰²ã‚ŠæŒ¯ã£ã¦ã„ã¾ã™ã€‚

```mermaid
graph LR;
subgraph è¨ªã‚Œã‚‹
S(("5"))
1((0))
2((1))
3((2))
end
subgraph è¨ªã‚Œãªã„
4((3))
5((4))
T((6))
end

S -- "5" --> 1
S -- "2" --> 2
S -- "10" --> 3
S -. "âŒ3" ...-> 4
S -. "âŒ6" ...-> 5

1 -. "âŒ5" ...-> T
2 -. "âŒ5" ...-> T
3 -. "âŒ5" ...-> T
4 -- "5" --> T
5 -- "5" --> T

3 -- "MAX" --> 1
3 -- "MAX" --> 2
5 -- "MAX" --> 4
```


# å®Ÿè£…ä¾‹

## æœ€å°ã‚«ãƒƒãƒˆ, æœ€å¤§æµ (MfGraph)
https://github.com/hossy3/atcoder-solutions/blob/main/atcoder/typical90/src/bin/040_maxflow.rs
