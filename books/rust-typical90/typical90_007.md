---
title: "007 - CP Classesï¼ˆâ˜…3ï¼‰"
---

[007 \- CP Classesï¼ˆâ˜…3ï¼‰](https://atcoder.jp/contests/typical90/tasks/typical90_g)

# ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
## äºŒåˆ†æ¢ç´¢ (Vec::binary_search())

ã‚¯ãƒ©ã‚¹ã®ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒ `v = vec![10, 20, 30]` ã®å ´åˆã€ç”Ÿå¾’ã®ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«å¯¾ã™ã‚‹ä¸æº€åº¦ã‚’è€ƒãˆã¾ã™ã€‚

|ç”Ÿå¾’ï¼¼å€™è£œ|..|10|..|20|..|30|..|v.binary_search()|ä¸æº€åº¦|
|---|---|---|---|---|---|---|---|---|---|
|3|âŒ|ğŸ”||||||`Err(&0)`|3|
|10||âœ…||||||`Ok(&0)`|0|
|18||ğŸ”|âŒ|ğŸ”||||`Err(&1)`|2|
|20||||âœ…||||`Ok(&1)`|0|
|23||||ğŸ”|âŒ|ğŸ”||`Err(&2)`|3|
|30||||||âœ…||`Ok(&2)`|0|
|33||||||ğŸ”|âŒ|`Err(&3)`|3|

* [Vec in std::vec \- Rust > binary_search()](https://doc.rust-lang.org/std/vec/struct.Vec.html#method.binary_search)

`v` ãŒæ˜‡é †ã«ä¸¦ã‚“ã§ã„ã‚‹ã¨ãã«ã€äºŒåˆ†æ¢ç´¢ `v.binary_search()` ãŒä½¿ãˆã¾ã™ã€‚ã¡ã‚‡ã†ã©ã®å ´æ‰€ `Ok` ãŒè¿”ã£ã¦ãã‚‹å ´åˆã¯ä¸æº€åº¦ã‚¼ãƒ­ã€é–“ã®å ´æ‰€ `Err` ãŒè¿”ã£ã¦ãã‚‹å ´åˆã¯éš£ã®ä¸æº€åº¦ã®ã†ã¡å°ã•ãªæ–¹ã‚’è¿”ã›ã°è‰¯ã„ã§ã™ã€‚

```rust
match a.binary_search(&b) {
    Ok(_) => 0,
    Err(i) => {
        if i == 0 {
            a[0] - b
        } else if i == a.len() {
            b - a[i - 1]
        } else {
            (b - a[i - 1]).min(a[i] - b)
        }
    }
}
```

ã€Œ`v` ãŒæ˜‡é †ã«ä¸¦ã‚“ã§ã„ã‚‹ã¨ãã«ã€ã¨ã„ã†ã“ã¨ã§ã€äº‹å‰ã«å…¥åŠ›ã‚’ã‚½ãƒ¼ãƒˆã—ã¦ãŠãã¾ã™ã€‚

```rust
a.sort();
```

ã“ã‚Œã§è§£ã‘ã¾ã™ã€‚


# Tips

## ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°

* [ã‚¹ã‚³ãƒ¼ãƒ—ã¨ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚° \- Rust By Example æ—¥æœ¬èªç‰ˆ](https://doc.rust-jp.rs/rust-by-example-ja/variable_bindings/scope.html)

```rust
for b in b {
    let result = f(&a, b);
    println!("{result}");
}
```

ç§ã¯ã“ã®ã‚ˆã†ã«ã€Œå•é¡Œæ–‡ä¸­ã®é…åˆ— Bã€ã‚‚ã€ã€Œé…åˆ— B ã®å€‹ã€…ã®è¦ç´ ã€ã‚‚ä¸¡æ–¹å¤‰æ•° `b` ã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã€‚ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã§ã™ã€‚

æ¬¡ã®ã‚ˆã†ãªåˆ©ç‚¹ãŒã‚ã‚Šã¾ã™:

* å…ƒã®é…åˆ—å…¨ä½“ã‚’é–“é•ã£ã¦ä½¿ã‚ãªã„ã‚ˆã†ã«éš ã—ãŸã„
  * å€‹ã€…ã®å€¤ã‚’è¦‹ã¦ã„ã‚‹ã¨ãã«ã€å…ƒã®é…åˆ— B ã‚’è¦‹ãŸããªã‚‹ã“ã¨ã¯ãªã„ã¯ãš
* å¤‰æ•°åã‚’è€ƒãˆã‚‹æ‰‹é–“ãŒæ¸›ã‚‹
* å‹ãŒç•°ãªã‚‹ã®ã§ã€é–“é•ã£ã¦ä½¿ã£ãŸã¨ã—ã¦ã‚‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã¯ãš

åŒã˜åå‰ã®å¤‰æ•°ãŒã‚ã‚‹ã¨èª­ã¿ã¥ã‚‰ã„ã¨ã„ã†è©±ã‚‚ã‚ã‚Šã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«ã‚ˆã£ã¦ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ Rust ã§ã®ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ã¯ã‚¢ãƒªã ã¨æ€ã„ã¾ã™ã€‚

## usize::saturating_sub()

å…ˆã»ã©ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ç›´ã—ã¾ã™ã€‚

```rust
if i == 0 {
    a[0] - b
} else if i == a.len() {
    b - a[i - 1]
} else {
    (b - a[i - 1]).min(a[i] - b)
}
```

ã„ã¤ã‚‚ä¸¡éš£ã‚’è¦‹ã‚‹ã‚ˆã†ã«ã€ `i - 1` ã™ã‚Œã°è‰¯ã„ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚æ•´æ•°å‹ã¨éè² æ•´æ•°å‹ã‚’ã‚ã¾ã‚ŠåŒºåˆ¥ã—ãªã„è¨€èªãªã‚‰ã“ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚

```rust
let x0 = a[(i - 1).max(0)];
let x1 = a[i.min(a.len() - 1)];
((b - x0).abs(x0)).min((b - x1).abs(x1))
```

ã—ã‹ã—ã€Rust ã§ `i` ã‚’é…åˆ—ã‚¢ã‚¯ã‚»ã‚¹ã®ãŸã‚ã«éè² æ•´æ•°å‹ `usize` ã«ã—ã¦ã„ã‚‹ã¨ã€ `i == 0` ã®ã¨ãã«å¼•ãç®—ã§ããªã„ã¨ã„ã†ç†ç”±ã§ panic ã—ã¾ã™ã€‚

ã“ã‚“ãªæ„Ÿã˜ã§æ›¸ã‘ã° panic ã—ã¾ã›ã‚“ãŒã€èª­ã¿ã¥ã‚‰ã„ã§ã™ã€‚

```rust
let x0 = a[(i as i64 - 1).max(0) as usize];
```

* [usize \- Rust > saturating_sub()](https://doc.rust-lang.org/std/primitive.usize.html#method.saturating_sub)

é£½å’Œã™ã‚‹å¼•ãç®—ã‚’ä½¿ã†ã¨ã€`as` ã‚ˆã‚Šã‚¹ãƒƒã‚­ãƒªæ›¸ã‘ã¾ã™ã€‚

```rust
let x0 = a[i.saturating_sub(1)];
```

`saturating_sub()` ã¨ `wrapping_add_signed()` ã‚’ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§è‰¯ãä½¿ã†å°è±¡ãŒã‚ã‚Šã¾ã™ã€‚


# å®Ÿè£…ä¾‹

## äºŒåˆ†æ¢ç´¢ (Vec::binary_search())
https://github.com/hossy3/atcoder-solutions/blob/main/atcoder/typical90/src/bin/007_binary_search.rs

## äºŒåˆ†æ¢ç´¢ (Vec::binary_search(), saturating_sub())
https://github.com/hossy3/atcoder-solutions/blob/abee46dd3a49158b6cedd2eb8803981d6981c8cd/atcoder/typical90/src/bin/007_binary_search_compact.rs#L6-L10

ã“ã®è¡Œä»¥å¤–ã¯ä¸Šã¨åŒã˜ã§ã™ã€‚
