---
title: "048 - I will not drop out（★3）"
---

[048 \- I will not drop out（★3）](https://atcoder.jp/contests/typical90/tasks/typical90_av)


# アルゴリズム

## 貪欲 & N 問

|i|満点|部分点|
|---|---|---|
|0|4|3|
|1|9|5|
|2|15|8|
|3|8|6|

最初の 1分で一番高い点数を取れるのは、4つの選択肢のうち i=2 の部分点 8 です。部分点 8 を取ると、15 - 8 = 7点の追加問題が現れます。

次の 1分で一番高い点数を取れるのは、4つの選択肢のうち i=2 の後半 7 です。これにより i=2 は満点を取りましたので、次の問題は選択肢 3つになります。

というように、満点を (部分点, 満点 - 部分点) に分け、大きな値から貪欲に取り出します。

|i|満点|部分点|満点 - 部分点|
|---|---|---|---|
|0|4|3|1|
|1|9|5|4|
|2|15|8|7|
|3|8|6|2|

|手順|点数 (降順)|最高点|合計|
|---|---|---|---|
|1|[(8, 7), (6, 2), (5, 4), (3, 1)]|8|8|
|2|[(7), (6, 2), (5, 4), (3, 1)]|7|15|
|3|[(6, 2), (5, 4), (3, 1)]|6|21|
|4|[(5, 4), (3, 1), (2)]|5|26|
|5|[(4), (3, 1), (2)]|4|30|
|6|[(3, 1), (2)]|3|33|
|7|[(2), (1)]|2|35|
|8|[(1)]|1|36|

3つ取り出す場合は、3手目までの合計 21点になります。

これは BinaryHeap を用いて行えます。

```rust
let mut q = BinaryHeap::new();
for (a, b) in ab {
    q.push((b, a - b));
}
let mut score = 0;
for _ in 0..k {
    let (x, y) = q.pop().unwrap();
    score += x;
    if y > 0 {
        q.push((y, 0));
    }
}
println!("{score}");
```

## 貪欲 & 2N 問

先ほどは 4つの問題から選びました。これは 1つの満点問題を「部分点 (A)」と「満点 - 部分点 (B)」の 2つの問題に分けても同じ答えになります。

(B) を (A) より先に選ぶことはできませんので良くないようにも見えます。しかし、問題の制約に「部分点は満点の半分より大きい」と書いています。(A) の方が (B) より大きいですので、点数の高い方から選べば安心です。


|i|満点|部分点|満点 - 部分点|
|---|---|---|---|
|0|4|3|1|
|1|9|5|4|
|2|15|8|7|
|3|8|6|2|

|手順|点数 (降順)|最高点|合計|
|---|---|---|---|
|1|[8, 7, 6, 5, 4, 3, 2, 1]|8|8|
|2|[7, 6, 5, 4, 3, 2, 1]|7|15|
|3|[6, 5, 4, 3, 2, 1]|6|21|
|4|[5, 4, 3, 2, 1]|5|26|
|5|[4, 3, 2, 1]|4|30|
|6|[3, 2, 1]|3|33|
|7|[2, 1]|2|35|
|8|[1]|1|36|

コードも単純になります。

```diff rust
 let mut q = BinaryHeap::new();
 for (a, b) in ab {
-    q.push((b, a - b));
+    q.push(b);
+    q.push(a - b);
 }
 let mut score = 0;
 for _ in 0..k {
-    let (x, y) = q.pop().unwrap();
+    let x = q.pop().unwrap();
     score += x;
-    if y > 0 {
-        q.push((y, 0));
-    }
 }
 println!("{score}");
```


# 実装例

## 貪欲 & N問
https://github.com/hossy3/atcoder-solutions/blob/main/atcoder/typical90/src/bin/048_binary_heap_2.rs

## 貪欲 & 2N問
https://github.com/hossy3/atcoder-solutions/blob/main/atcoder/typical90/src/bin/048_binary_heap.rs
