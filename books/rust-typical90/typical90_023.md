---
title: "023 - Avoid Warï¼ˆâ˜…7ï¼‰"
---

[023 \- Avoid Warï¼ˆâ˜…7ï¼‰](https://atcoder.jp/contests/typical90/tasks/typical90_w)


# ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

## æ–¹é‡: 2æ¬¡å…ƒDPã®çŠ¶æ…‹æ›´æ–°ã«ã¤ã„ã¦

ğŸ‘‘ã‚­ãƒ³ã‚°ã®å‘¨è¾º 8ãƒã‚¹ã«ã»ã‹ã®ã‚­ãƒ³ã‚°ãŒã‚ã£ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚å·¦ä¸Šã‹ã‚‰é †ã«çŠ¶æ…‹ã‚’åŸ‹ã‚ã¦ã„ãã¨ã€ä¸€è¦‹ ğŸ” 4ã¤ã® 16çŠ¶æ…‹ã ã‘ã‹ã‚‰ ğŸ‘‘ ã®çŠ¶æ…‹ãŒåˆ†ã‹ã‚Šãã†ã«æ€ã„ã¾ã™ã€‚

|||||||
|---|---|---|---|---|---|
||ğŸ”|ğŸ”|ğŸ”|||
||ğŸ”A|ğŸ‘‘B||||
|||||||

ğŸ‘‘B ã¾ã§ã®ãƒã‚¹ã‚’å·¦ä¸Šã‹ã‚‰åŸ‹ã‚ã‚‹çŠ¶æ…‹æ•°ã¯ã€ğŸ”A ã¾ã§ã®ãƒã‚¹ã‚’å·¦ä¸Šã‹ã‚‰åŸ‹ã‚ã‚‹çŠ¶æ…‹æ•°ä»¥ä¸Šã®ã¯ãšã§ã™ã€‚

ã—ã‹ã—ã“ã®æ–¹é‡ã§ã¯ã€ã†ã¾ãçŠ¶æ…‹ã‚’æ··ãœã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

|||||||
|---|---|---|---|---|---|
|||||||
|ğŸ”|ğŸ”A|ğŸ”B||||
|ğŸ”|ğŸ‘‘C|||||

|||||||
|---|---|---|---|---|---|
|||||||
||ğŸ”A|ğŸ”B|ğŸ”|||
||ğŸ”C|ğŸ‘‘D||||

ğŸ‘‘C ã¾ã§ã®ãƒã‚¹ã‚’å·¦ä¸Šã‹ã‚‰åŸ‹ã‚ã‚‹çŠ¶æ…‹æ•°ã¯ã€ğŸ”A ã¾ã§ã®ãƒã‚¹ã‚’å·¦ä¸Šã‹ã‚‰åŸ‹ã‚ã‚‹çŠ¶æ…‹æ•°ä»¥ä¸Šã®ã¯ãšã§ã™ã€‚

ğŸ‘‘D ã¾ã§ã®ãƒã‚¹ã‚’å·¦ä¸Šã‹ã‚‰åŸ‹ã‚ã‚‹çŠ¶æ…‹æ•°ã¯ã€ğŸ”B, ğŸ”C ã¾ã§ã®ãƒã‚¹ã‚’åŸ‹ã‚ã‚‹çŠ¶æ…‹æ•°ä»¥ä¸Šã§ã™ã€‚B, C ãŒãã‚Œãã‚Œåˆ¥ã®ä¾å­˜é–¢ä¿‚ã§å¢—ãˆã¦ã„ã‚‹ã¨ã€D ã®çŠ¶æ…‹æ•°ãŒåˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚

2ã‹æ‰€ã§çŠ¶æ…‹æ•°ãŒå¢—ãˆã‚‹ã¨æ··ãœã‚‰ã‚Œã¾ã›ã‚“ã€‚çŠ¶æ…‹ãŒåŒã˜è¦å‰‡ã§å¢—ãˆç¶šã‘ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ãŸã¨ãˆã° 1ã¤ä¸Šã®è¡Œã®çŠ¶æ…‹ã‚’è¦šãˆã‚‹ã‚ˆã†ã«ã—ã¦ã€ä»Šèª¿ã¹ã¦ã„ã‚‹è¡Œã‚‚é †æ¬¡æ›´æ–°ã—ã¦ã„ãæ„Ÿã˜ã§ã™ã€‚

|||||||
|---|---|---|---|---|---|
|||||||
|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸|ğŸ—’ï¸|ğŸ—’ï¸|
|ğŸ“ğŸ”|ğŸ‘‘C|||||

|||||||
|---|---|---|---|---|---|
|||||||
|ğŸ—’ï¸|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸|ğŸ—’ï¸|
|ğŸ“|ğŸ“ğŸ”C|ğŸ‘‘D||||

ã¾ãŸã¯è¡Œå˜ä½ã§ã¯ãªãã€ä»Šå¾Œå‚ç…§ã™ã‚‹ã“ã¨ã®ã‚ã‚‹ w + 1 å€‹ã ã‘è¦šãˆã‚‹æ–¹æ³•ã«ã—ã¾ã™ã€‚ã“ã¡ã‚‰ã®æ–¹ãŒåŠ¹ç‡çš„ã§ã™ã€‚

|||||||
|---|---|---|---|---|---|
|||||||
|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸|ğŸ—’ï¸|ğŸ—’ï¸|
|ğŸ—’ï¸ğŸ”|ğŸ‘‘C|||||

|||||||
|---|---|---|---|---|---|
|||||||
||ğŸ—’ï¸ğŸ”|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸ğŸ”|ğŸ—’ï¸|ğŸ—’ï¸|
|ğŸ—’ï¸|ğŸ—’ï¸ğŸ”C|ğŸ‘‘D||||

## Bit DP / è¡Œå˜ä½

```
.#.
#..
.##
```

1è¡Œç›® `.#.` ã®ã‚­ãƒ³ã‚°ã®é…ç½®æ–¹æ³•ã¯ `.#.`, `.#o`, `o#.`, `o#o` ã® 4é€šã‚Šã‚ã‚Šã¾ã™ã€‚ã‚­ãƒ³ã‚°ãŒã‚ã‚‹ã¨ã“ã‚ã®ãƒ“ãƒƒãƒˆã‚’ç«‹ã¦ã‚‹ã‚ˆã†ã« `0b000`, `0b001`, `0b100`, `0b101` ã¨è€ƒãˆã¾ã™ã€‚ãã‚Œãã‚Œ 1é€šã‚Šã§ã™ã€‚

```mermaid
graph TD;
subgraph Row1
1_0(000:1)
1_1(001:1)
1_4(100:1)
1_5(101:1)
end
subgraph Row2
2_0(000:4)
2_1(001:2)
2_2(010:1)
end
subgraph Row3
3_0(000:7)
3_4(100:6)
end

1_0 -- ".#.
#.." --> 2_0
1_0 -- ".#.
#.o" --> 2_1
1_0 -- ".#.
#o." --> 2_2
1_1 -- ".#o
#.." --> 2_0
1_4 -- "o#.
#.." --> 2_0
1_4 -- "o#.
#.o" --> 2_1
1_5 -- "o#o
#.." --> 2_0

2_0 -- "#..
.##" --> 3_0
2_0 -- "#..
o##"  --> 3_4
2_1 -- "#.o
.##"  --> 3_0
2_1 -- "#.o
o##"  --> 3_4
2_2 -- "#o.
.##"  --> 3_0
```

æœ€å¾Œã®è¡ŒãŒåŸ‹ã¾ã‚‹ã¨ã€å…¨çŠ¶æ…‹æ•°ã¯ 6+7 = 13 ã«ãªã‚Šã¾ã™ã€‚

å„è¡Œã®çŠ¶æ…‹æ•°ã¯ 1è¡ŒãŒ 24åˆ—ã‚ã‚‹ã¨ä¸€è¦‹ 2^24 ãã†ã§ã™ãŒã€ã‚­ãƒ³ã‚°ãŒéš£ã‚Šåˆã‚ãªã„ãŸã‚å°ã•ããªã‚Šã¾ã™ã€‚ã“ã‚Œã§ã ã„ãŸã„ DP ã§ãã¾ã™ã€‚

24Ã—24 ã™ã¹ã¦é…ç½®å¯èƒ½ãªå ´åˆã ã‘ã¯ã¨ã¦ã‚‚é‡ãã€TLE ã—ã¾ã™ã€‚æ±ºã‚æ‰“ã¡ã§ç­”ãˆ `253474685` ã‚’å…¥ã‚Œã¦ã‚‚ã¨æ€ã„ãŸããªã‚‹ãã‚‰ã„ã§ã™â€¦â€¦ã€‚


## Bit DP / w + 1 å€‹å±¥æ­´ç®¡ç†

```
.#.
#..
.##
```

åŒã˜ç›¤é¢ã‚’ 1ãƒã‚¹ãšã¤æ›´æ–°ã—ã¾ã™ã€‚ `?` ã¯è€ƒãˆãªãã¦è‰¯ã„ãƒã‚¹ã‚’è¡¨ã—ã¾ã™ã€‚4ãƒã‚¹åˆ†ã®å±¥æ­´ãŒã‚ã‚Œã°ã€æ¬¡ã®ãƒã‚¹ã®çŠ¶æ…‹æ•°ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

```mermaid
graph TD;
subgraph r0_c0
0_0_0("`0000:1
...
.??
`")
0_0_1("`0001:1
...
o??
`")
end

subgraph r0_c1
0_1_0("`0000:1
?..
.#?`")
0_1_2("`0010:1
?..
o#?`")
end
0_0_0--> 0_1_0
0_0_1--> 0_1_2

subgraph r0_c2
0_2_0("`0000:1
??.
.#.`")
0_2_1("`0001:1
??.
.#o`")
0_2_4("`0100:1
??.
o#.`")
0_2_5("`0101:1
??.
o#o`")
end
0_1_0 --> 0_2_0
0_1_0 -- o --> 0_2_1
0_1_2 --> 0_2_4
0_1_2 -- o --> 0_2_5

subgraph r1_c0
1_0_0("`0000:1
.#.
#??`")
1_0_2("`0010:1
.#o
#??`")
1_0_8("`1000:1
o#.
#??`")
1_0_a("`1010:1
o#o
#??`")
end
0_2_0 --> 1_0_0
0_2_1 --> 1_0_2
0_2_4 --> 1_0_8
0_2_5 --> 1_0_a

subgraph r1_c1
1_1_0("`0000:2
?#.
#.?`")
1_1_1("`0001:1
?#.
#o?`")
1_1_4("`0100:2
?#o
#o?`")
end
1_0_0 --> 1_1_0
1_0_0 -- o --> 1_1_1
1_0_2 --> 1_1_4
1_0_8 -- o --> 1_1_1
1_0_a --> 1_1_4

subgraph r1_c2
1_2_0("`0000:2
??.
#..`")
1_2_1("`0001:2
??.
#.o`")
1_2_2("`0010:1
??.
#o.`")
1_2_8("`1000:2
??o
#..`")
end
1_1_0 --> 1_2_0
1_1_0 -- o --> 1_2_1
1_1_1 --> 1_2_2
1_1_4 --> 1_2_8

subgraph r2_c0
2_0_0("`0000:4
#..
.??`")
2_0_1("`0001:4
#..
o??`")
2_0_2("`0010:2
#.o
.??`")
2_0_3("`0011:2
#.o
o??`")
2_0_4("`0100:1
#o.
.??`")
end
1_2_0 --> 2_0_0
1_2_0 -- o --> 2_0_1
1_2_1 --> 2_0_2
1_2_1 -- o --> 2_0_3
1_2_2 --> 2_0_4
1_2_8 --> 2_0_0
1_2_8 -- o --> 2_0_1

subgraph r2_c1
2_1_0("`0000:4
?..
.#?`")
2_1_2("`0010:4
?..
o#?`")
2_1_4("`0100:2
?.o
.#?`")
2_1_6("`0110:2
?.o
o#?`")
2_1_8("`1000:1
?o.
.#?`")
end
2_0_0 --> 2_1_0
2_0_1 --> 2_1_2
2_0_2 --> 2_1_4
2_0_3 --> 2_1_6
2_0_4 --> 2_1_8

subgraph r2_c2
2_2_0("`0000:5
??.
.##`")
2_2_4("`0100:4
??.
o##`")
2_2_8("`1000:2
??o
.##`")
2_2_c("`1100:2
??o
o##`")
end
2_1_0 --> 2_2_0
2_1_2 --> 2_2_4
2_1_4 --> 2_2_8
2_1_6 --> 2_2_c
2_1_8 --> 2_2_0
```

é·ç§»æ•°ãŒå¢—ãˆã¾ã—ãŸãŒã€ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ã‹ã‚‰çŸ¢å°ãŒ 1æœ¬ã‹ 2æœ¬å»¶ã³ã‚‹ã ã‘ã¨æ€ã†ã¨ã€è¨ˆç®—é‡ã¯ã‚ˆã‚Šè»½ã„ã§ã™ã€‚


# å®Ÿè£…ä¾‹

## Bit DP / è¡Œå˜ä½ (TLE)
https://github.com/hossy3/atcoder-solutions/blob/main/atcoder/typical90/src/bin/023_bit_dp_row_tle.rs

## Bit DP / w + 1 å€‹å±¥æ­´ç®¡ç†
https://github.com/hossy3/atcoder-solutions/blob/main/atcoder/typical90/src/bin/023_bit_dp_w_plus_1.rs
